<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOSTON JASTIP</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Setting the default font to Inter */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7; /* Light gray background */
        }
        /* Custom class to hide elements */
        .hidden-view {
            display: none;
        }
        /* Style for the active variant color selector */
        .variant-thumbnail.active {
            border: 4px solid #4f46e5; /* Tailwind indigo-600 */
        }
        /* Style for the active image in the side gallery */
        .gallery-thumbnail-btn.active-gallery {
            border: 3px solid #10b981; /* Tailwind emerald-500 for distinction */
            opacity: 1;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }
    </style>
</head>
<body class="min-h-screen antialiased">

    <!-- Header Section -->
    <header class="bg-indigo-700 shadow-xl p-6 md:p-10">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2">
                BOSTON JASTIP
            </h1>
            <p class="text-indigo-200 text-lg">
                Jasa Titip dari US ke Indonesia.
            </p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">

        <!-- 0. Filter Bar -->
        <div id="filter-bar" class="bg-white p-4 rounded-xl shadow-md mb-6 flex items-center space-x-4">
            <label for="brand-filter" class="text-gray-700 font-semibold">Filter by Brand:</label>
            <select id="brand-filter" onchange="filterProducts(this.value)"
                    class="p-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 shadow-sm md:w-64 w-full md:auto">
                <option value="all">All Brands</option>
            </select>
        </div>

        <!-- 1. Catalog Grid View (Default) -->
        <div id="catalog-grid-view">
            <div id="catalog-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Product cards injected by JS -->
            </div>
        </div>

        <!-- 2. Product Details View -->
        <div id="details-view" class="hidden-view">
            <!-- Back Button -->
            <button onclick="showCatalogGrid()" class="flex items-center text-indigo-600 hover:text-indigo-800 transition duration-150 mb-6 font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Back to Catalog
            </button>
            <div id="product-details-container" class="bg-white rounded-xl shadow-2xl p-6 md:p-10">
                <!-- Detailed product info injected here -->
            </div>
        </div>

    </main>

    <script>
        // --- CATALOG DATA ---
        const products = [
            {
                id: "medium_corner_zip_wallet",
                name: "Coach - Medium Corner Zip Wallet",
                brand: "Coach",
                price: "Rp -",
                variants: [
                    {
                        id: "medium_corner_zip_wallet_1",
                        color: "gold/maple",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cr791_immpl_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cr791_immpl_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cr791_immpl_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_2",
                        color: "gold/black",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/6390_imblk_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/6390_imblk_a8?$desktopProductTile$", alt: "Angle" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_3",
                        color: "gold/chalk",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/6390_imchk_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/6390_imchk_a8?$desktopProductTile$", alt: "Angle" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_4",
                        color: "silver/light black",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/6390_svdtv_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/6390_svdtv_a8?$desktopProductTile$", alt: "Angle" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_5",
                        color: "gold/true red",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imdn8_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imdn8_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imdn8_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_6",
                        color: "gunmetalk",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_qbcbd_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_qbcbd_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_qbcbd_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_7",
                        color: "gold",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imorx_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imorx_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imorx_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_8",
                        color: "silver",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svp3k_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svp3k_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svp3k_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_9",
                        color: "silver/dark black",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svbk_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svbk_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svbk_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_10",
                        color: "gold/grey birch",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imc2j_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imc2j_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_imc2j_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_11",
                        color: "silver/red",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svpm_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svpm_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo41_svpm_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_12",
                        color: "gold/tan",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo32_imtn2_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo32_imtn2_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo32_imtn2_a91?$desktopProductTile$", alt: "Inside" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cbo32_imtn2_a99?$desktopProductTile$", alt: "Detail" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_13",
                        color: "silver/black",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw526_svbk_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw526_svbk_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw526_svbk_a82?$desktopProductTile$", alt: "Inside" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw526_svbk_a91?$desktopProductTile$", alt: "Detail" },
                        ],
                    },
                ]
            },
            {
                id: "medium_corner_zip_wallet_in_signature",
                name: "Coach - Medium Corner Zip Wallet in Signature",
                brand: "Coach",
                price: "Rp -",
                variants: [
                    {
                        id: "medium_corner_zip_wallet_in_signature_1",
                        color: "gold/walnut/black",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxaq_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxaq_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxaq_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_2",
                        color: "gold/sand/chalk",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxdm_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxdm_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxdm_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_3",
                        color: "gunmetal/charcoal/black",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_qbmi5_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_qbmi5_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_qbmi5_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_4",
                        color: "silver/sand/cream",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_svpwh_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_svpwh_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_svpwh_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_5",
                        color: "gold/tan/black",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imqrx_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imqrx_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imqrx_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_6",
                        color: "gold/tan/brown",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxhe_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxhe_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxhe_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_7",
                        color: "gold/white/chalk",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxu5_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxu5_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imxu5_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_8",
                        color: "silver/brown/pink",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_svygg_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_svygg_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_svygg_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_9",
                        color: "gold/black/red",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imyly_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imyly_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw786_imyly_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_10",
                        color: "gold/navy/midnight navy jacquard",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cu987_imx1x_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cu987_imx1x_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cu987_imx1x_a91?$desktopProductTile$", alt: "Inside" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_11",
                        color: "gold/sand multi with floral print",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/car13_imsas_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/car13_imsas_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/car13_imsas_a82?$desktopProductTile$", alt: "Inside" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/car13_imsas_a91?$desktopProductTile$", alt: "Detail" },
                        ],
                    },
                    {
                        id: "medium_corner_zip_wallet_in_signature_12",
                        color: "gold/light khaki chalk multi with floral print",
                        price: "Rp -",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cr968_imotv_a0?$desktopProductTile$", alt: "Front" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cr968_imotv_a8?$desktopProductTile$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cr968_imotv_a82?$desktopProductTile$", alt: "Inside" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cr968_imotv_a91?$desktopProductTile$", alt: "Detail" },
                            { type: 'video', url: "https://assets.coach.com/na/media/EOS/pdp/C0082_SVV7Q_Med_Crn_Zip.mp4", alt: "360 Spin" },
                        ],
                    },
                ]
            },
            {
                id: "nolita_19",
                name: "Coach - Nolita 19",
                brand: "Coach",
                price: "Rp 2.500.000",
                variants: [
                    {
                        id: "nolita_19_1",
                        color: "signature canvas/Gold/Sand/Chalk",
                        price: "Rp 2.500.000",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a0?$desktopProduct$", alt: "Front" },
                            { type: 'video', url: "https://assets.coach.com/na/media/pdp/spin_cw426_imxdm_v2_p3.mp4", alt: "360 Spin" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a99?$desktopProduct$", alt: "Angle" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a10?$desktopProduct$", alt: "Inside" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a6?$desktopProduct$", alt: "Detail 1" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a8?$desktopProduct$", alt: "Detail 2" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a3?$desktopProduct$", alt: "Back" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a92?$desktopProduct$", alt: "Strap" },
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a91?$desktopProduct$", alt: "On model" },
                        ],
                    },
                    {
                        id: "nolita_19_2",
                        color: "smooth leather/Gold",
                        price: "Rp 2.650.000",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/cci92_immrn_a0?$desktopProduct$", alt: "Front" },
                            { type: 'image', url: "https://placehold.co/800x600/4c0519/ffffff?text=Smooth+Leather+Side+View", alt: "Side" },
                            { type: 'image', url: "https://placehold.co/800x600/4c0519/ffffff?text=Smooth+Leather+Back", alt: "Back" },
                        ],
                    },
                    {
                        id: "nolita_19_3",
                        color: "novelty leather/Silver",
                        price: "Rp 2.700.000",
                        media: [
                            { type: 'image', url: "https://coach.scene7.com/is/image/Coach/ccf58_sva47_a0?$desktopProduct$", alt: "Front" },
                            { type: 'image', url: "https://placehold.co/800x600/1e40af/ffffff?text=Novelty+Detail+1", alt: "Detail" },
                        ],
                    },
                ]
            },
            {
                id: "tj_large_tottebage",
                name: "Trader Joes Large Tote Shopping Bag Cotton Canvas Embroidered Bag",
                brand: "Trader Joe's",
                price: "Rp 250.000",
                variants: [
                    {
                        id: "tj_large_tottebage_1",
                        color: "navy blue",
                        price: "Rp 250.000",
                        media: [
                            { type: 'image', url: "https://i5.walmartimages.com/seo/Trader-Joes-Large-Tote-Shopping-Bag-Cotton-Canvas-Embroidered-Bag-1-Navy-Blue_19a3bf93-5e46-4bf3-a5c6-217d50472c87.ddf093bc469995bb0b2e2790d812cfa0.jpeg?odnHeight=2000&odnWidth=2000&odnBg=FFFFFF", alt: "Front" },
                            { type: 'image', url: "https://i5.walmartimages.com/asr/805a7ae0-d459-475e-809c-622a78c53f47.bf35b14d1effc02daef5796551d81541.jpeg?odnHeight=2000&odnWidth=2000&odnBg=FFFFFF", alt: "Angle" },
                        ],
                    },
                ]
            },
            {
                id: "zenith-smartwatch",
                name: "Zenith Smartwatch (Series 3)",
                brand: "Apple",
                price: "$199.50",
                imageUrl: "https://placehold.co/800x600/10b981/ffffff?text=Zenith+Watch+Details",
            },
            {
                id: "luna-lamp",
                name: "Luna Desk Lamp",
                brand: "IKEA",
                price: "$65.00",
                imageUrl: "https://placehold.co/800x600/fbbf24/101010?text=Luna+Lamp+Details",
            },
            {
                id: "coach-wallet",
                name: "Coach Slim Wallet",
                brand: "Coach",
                price: "Rp 1.200.000",
                imageUrl: "https://placehold.co/800x600/7c3aed/ffffff?text=Coach+Wallet",
            }
        ];
        // ------------------------------------

        const catalogGridView = document.getElementById('catalog-grid-view');
        const detailsView = document.getElementById('details-view');
        const catalogGrid = document.getElementById('catalog-grid');
        const productDetailsContainer = document.getElementById('product-details-container');
        const brandFilterSelect = document.getElementById('brand-filter');

        // Global state
        let currentProductVariants = [];
        let currentProductName = '';
        let currentSelectedVariant = null;
        let activeFilter = 'all';

        function getProductById(id) {
            return products.find(p => p.id === id);
        }

        function showCatalogGrid() {
            catalogGridView.classList.remove('hidden-view');
            detailsView.classList.add('hidden-view');
            document.getElementById('filter-bar').classList.remove('hidden-view');
            window.location.hash = '';
        }
        
        function updateOrderLink(name, color) {
            const orderLink = document.getElementById('order-link');
            const whatsappNumber = '16179355621'; 
            const selectedItemName = color !== 'N/A' ? `${name} (${color})` : name;
            const whatsappMessage = `Halo, saya tertarik untuk Jastip produk ${selectedItemName}.`;
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`;
            orderLink.href = whatsappUrl;
        }

        function renderVariantGallery(media, colorName) {
            const galleryContainer = document.getElementById('image-gallery-thumbnails');
            if (!galleryContainer) return;

            const galleryHtml = media.map((item, index) => {
                const activeClass = index === 0 ? 'active-gallery' : '';
                const thumbnailSrc = item.type === 'video'
                    ? 'https://placehold.co/100x100/4f46e5/ffffff?text=VIDEO'
                    : item.url;
                const videoOverlay = item.type === 'video' ? `
                    <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-30">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                ` : '';

                return `
                    <button
                        onclick="selectGalleryMedia(${index})" 
                        class="gallery-thumbnail-btn w-16 h-16 rounded-lg border-2 border-transparent overflow-hidden ${activeClass} hover:border-indigo-400 transition duration-150 transform hover:scale-105 relative bg-gray-50"
                        aria-label="View ${colorName} - ${item.alt}"
                        title="View ${colorName} - ${item.alt}"
                    >
                        <img
                            src="${thumbnailSrc}"
                            alt="${item.alt} thumbnail"
                            class="w-full h-full object-contain"
                            onerror="this.onerror=null; this.src='https://placehold.co/100x100/e0e0e0/333333?text=View';"
                        />
                        ${videoOverlay}
                    </button>
                `;
            }).join('');

            galleryContainer.innerHTML = galleryHtml;
        }

        // Hover-zoom main media in details
        window.selectGalleryMedia = function(mediaIndex) {
            if (!currentSelectedVariant || !currentSelectedVariant.media) return;

            const selectedMedia = currentSelectedVariant.media[mediaIndex];
            const container = document.getElementById('main-product-media-container');
            let mediaHtml = '';

            if (selectedMedia.type === 'video') {
                mediaHtml = `
                    <div class="relative w-full max-w-md mx-auto bg-gray-50 rounded-2xl shadow-md overflow-hidden">
                        <div class="relative w-full pb-[125%]">
                            <video
                                controls
                                autoplay
                                loop
                                muted
                                src="${selectedMedia.url}"
                                class="absolute inset-0 w-full h-full object-contain bg-black"
                                onerror="this.onerror=null; console.error('Video load error');"
                            >
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                `;
            } else {
                mediaHtml = `
                    <div class="relative w-full max-w-md mx-auto bg-gray-50 rounded-2xl shadow-md overflow-hidden">
                        <div class="relative w-full pb-[125%]">
                            <img
                                src="${selectedMedia.url}"
                                alt="${selectedMedia.alt ? currentProductName + ' ' + selectedMedia.alt : 'Product image'}"
                                class="absolute inset-0 w-full h-full object-contain transition-transform duration-300 ease-out hover:scale-110"
                                onerror="this.onerror=null; this.src='https://placehold.co/800x600/e0e0e0/333333?text=Details+Image+Missing';"
                            >
                        </div>
                    </div>
                `;
            }

            container.innerHTML = mediaHtml;

            document.querySelectorAll('.gallery-thumbnail-btn').forEach((btn, index) => {
                if (index === mediaIndex) {
                    btn.classList.add('active-gallery');
                } else {
                    btn.classList.remove('active-gallery');
                }
            });
        }

        window.selectVariant = function(variantId) {
            const selectedVariant = currentProductVariants.find(v => v.id === variantId);
            if (!selectedVariant) return;
            
            currentSelectedVariant = selectedVariant;
            
            document.querySelectorAll('.variant-thumbnail').forEach(el => {
                el.classList.remove('active');
            });
            const activeBtn = document.getElementById(`variant-btn-${variantId}`);
            if (activeBtn) activeBtn.classList.add('active');

            document.getElementById('selected-color-name').textContent = selectedVariant.color;
            document.getElementById('product-price').textContent = selectedVariant.price;
            updateOrderLink(currentProductName, selectedVariant.color);
            
            renderVariantGallery(selectedVariant.media, selectedVariant.color);
            selectGalleryMedia(0);
        }

        window.showProductDetails = function(productId) {
            const product = getProductById(productId);

            if (!product) {
                console.error('Product not found for ID:', productId);
                showCatalogGrid();
                return;
            }

            currentProductName = product.name;

            const isVariantProduct = product.variants && product.variants.length > 0;
            const initialVariant = isVariantProduct ? product.variants[0] : null;
            currentProductVariants = product.variants || [];
            currentSelectedVariant = initialVariant;

            const initialColorName = isVariantProduct ? initialVariant.color : 'N/A';
            const initialPrice = isVariantProduct ? initialVariant.price : product.price;
            
            const brandInfo = product.brand
                ? `<p class="text-sm font-medium text-gray-500 mb-2">Brand: <span class="text-indigo-600">${product.brand}</span></p>`
                : '';

            const variantThumbnailHtml = isVariantProduct ? product.variants.map((variant, index) => {
                const initialActiveClasses = index === 0 ? 'active' : '';
                const firstImage = variant.media.find(m => m.type === 'image') || variant.media[0];
                const thumbnailUrl = firstImage ? firstImage.url : 'https://placehold.co/100x100/e0e0e0/333333?text=N/A';
                
                return `
                    <button
                        id="variant-btn-${variant.id}"
                        onclick="selectVariant('${variant.id}')"
                        class="variant-thumbnail w-16 h-16 rounded-lg border-2 border-transparent overflow-hidden ${initialActiveClasses} hover:ring-2 hover:ring-indigo-300 transition duration-150 transform hover:scale-105 bg-gray-50"
                        aria-label="Select ${variant.color} variant"
                        title="${variant.color}"
                    >
                        <img
                            src="${thumbnailUrl}"
                            alt="${variant.color} thumbnail"
                            class="w-full h-full object-contain"
                            onerror="this.onerror=null; this.src='https://placehold.co/100x100/e0e0e0/333333?text=N/A';"
                        />
                    </button>
                `;
            }).join('') : '';

            const variantSelector = isVariantProduct ? `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-2">
                        Color: <span id="selected-color-name" class="font-normal text-indigo-600">${initialColorName}</span>
                    </h4>
                    <div class="flex flex-wrap gap-3">
                        ${variantThumbnailHtml}
                    </div>
                </div>
            ` : '';

            const detailHtml = `
                <div class="md:flex md:space-x-10">
                    
                    <!-- Image Column -->
                    <div class="md:w-1/2 mb-6 md:mb-0 flex">
                        ${isVariantProduct ? `<div id="image-gallery-thumbnails" class="flex flex-col space-y-3 mr-4"></div>` : ''}

                        <!-- Main media container (JS injects image/video with hover zoom) -->
                        <div id="main-product-media-container" class="w-full flex-1">
                        </div>
                    </div>

                    <!-- Details Column -->
                    <div class="md:w-1/2">
                        <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">${product.name}</h2>
                        ${brandInfo}
                        ${variantSelector}
                        <p id="product-price" class="text-3xl font-extrabold text-indigo-700 mb-6">${initialPrice}</p>
                        
                        <!-- ORDER BUTTON -->
                        <div class="mt-8 pt-4 border-t border-gray-200">
                            <h3 class="text-xl font-bold text-gray-900 mb-4">Tertarik?</h3>
                            <p class="text-gray-600 mb-4">Hubungi nomor WA di bawah ini.</p>
                            
                            <a href="#" id="order-link" target="_blank" class="inline-flex items-center justify-center w-full md:w-auto px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-500 hover:bg-green-600 transition duration-150 shadow-xl transform hover:scale-[1.01]">
                                Hubungi
                            </a>
                        </div>

                    </div>
                </div>
            `;

            productDetailsContainer.innerHTML = detailHtml;
            catalogGridView.classList.add('hidden-view');
            detailsView.classList.remove('hidden-view');
            document.getElementById('filter-bar').classList.add('hidden-view');
            window.location.hash = productId;
            window.scrollTo({ top: 0, behavior: 'smooth' });

            updateOrderLink(product.name, initialColorName);

            if (isVariantProduct) {
                renderVariantGallery(initialVariant.media, initialVariant.color);
                selectGalleryMedia(0);
            } else {
                const container = document.getElementById('main-product-media-container');
                container.innerHTML = `
                    <div class="relative w-full max-w-md mx-auto bg-gray-50 rounded-2xl shadow-md overflow-hidden">
                        <div class="relative w-full pb-[125%]">
                            <img
                                src="${product.imageUrl}"
                                alt="${product.name}"
                                class="absolute inset-0 w-full h-full object-contain transition-transform duration-300 ease-out hover:scale-110"
                            >
                        </div>
                    </div>
                `;
            }
        }

        // Coach-style card thumbnails in catalog
        function createProductCard(product) {
            let cardImageUrl = product.imageUrl;
            let cardPrice = product.price;

            if (product.variants && product.variants.length > 0) {
                const firstMedia = product.variants[0].media.find(m => m.type === 'image') || product.variants[0].media[0];
                if (firstMedia && firstMedia.type === 'image') {
                    cardImageUrl = firstMedia.url;
                } else if (firstMedia && firstMedia.type === 'video') {
                    cardImageUrl = 'https://placehold.co/600x400/4f46e5/ffffff?text=Video+Available';
                }
                cardPrice = product.variants[0].price;
            }
            
            const brandName = product.brand || 'Misc.';

            return `
                <div class="bg-white rounded-2xl shadow-sm hover:shadow-md transition duration-300 transform hover:-translate-y-1 group">
                    <!-- Square image area, Coach/Apple style -->
                    <div class="relative w-full pb-[100%] bg-white rounded-t-2xl overflow-hidden border border-gray-100">
                        <img
                            src="${cardImageUrl}"
                            alt="Image of ${product.name}"
                            class="absolute inset-0 w-full h-full object-contain p-4 transition-transform duration-300 ease-out group-hover:scale-105"
                            onerror="this.onerror=null; this.src='https://placehold.co/600x600/e0e0e0/333333?text=Image+Not+Found';"
                        >
                    </div>

                    <!-- Text -->
                    <div class="p-4">
                        <p class="text-xs font-semibold tracking-wide text-gray-500 uppercase mb-1">${brandName}</p>
                        <h2 class="text-sm font-medium text-gray-900 mb-1 line-clamp-2">${product.name}</h2>
                        <p class="text-indigo-600 text-base font-semibold mt-2">${cardPrice}</p>
                    </div>

                    <!-- Button -->
                    <div class="px-4 pb-4">
                        <button onclick="showProductDetails('${product.id}')"
                            class="w-full py-2.5 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition duration-150 shadow-sm">
                            View Details
                        </button>
                    </div>
                </div>
            `;
        }
        
        window.filterProducts = function(brandName) {
            activeFilter = brandName;
            
            const filteredProducts = products.filter(product => {
                if (brandName === 'all') return true;
                return product.brand && product.brand.toLowerCase() === brandName.toLowerCase();
            });
            
            renderCatalog(filteredProducts);
        }

        function renderCatalog(productList = products) {
            if (!catalogGrid) return;
            const catalogHtml = productList.map(createProductCard).join('');
            catalogGrid.innerHTML = catalogHtml;
        }

        function populateBrandFilter() {
            const brands = new Set();
            products.forEach(p => {
                if (p.brand) brands.add(p.brand);
            });

            brandFilterSelect.innerHTML = '<option value="all">All Brands</option>';
            
            Array.from(brands).sort().forEach(brand => {
                const option = document.createElement('option');
                option.value = brand;
                option.textContent = brand;
                brandFilterSelect.appendChild(option);
            });
        }

        function checkInitialHash() {
            const productId = window.location.hash.substring(1);
            if (productId) {
                showProductDetails(productId);
            } else {
                showCatalogGrid();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            populateBrandFilter();
            renderCatalog();
            checkInitialHash();
        });

        window.addEventListener('hashchange', () => {
            checkInitialHash();
        });
    </script>

</body>
</html>

