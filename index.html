<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOSTON JASTIP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Setting the default font to Inter */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7; /* Light gray background */
        }
        /* Custom class to hide elements */
        .hidden-view {
            display: none;
        }
        /* Style for the active variant selector */
        .variant-thumbnail.active {
            border: 4px solid #4f46e5; /* Tailwind indigo-600 */
        }
    </style>
</head>
<body class="min-h-screen antialiased">

    <header class="bg-indigo-700 shadow-xl p-6 md:p-10">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2">
                BOSTON JASTIP
            </h1>
            <p class="text-indigo-200 text-lg">
                Jasa Titip dari US ke Indonesia.
            </p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">

        <div id="catalog-grid-view">
            <div id="catalog-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
        </div>

        <div id="details-view" class="hidden-view">
            <button onclick="showCatalogGrid()" class="flex items-center text-indigo-600 hover:text-indigo-800 transition duration-150 mb-6 font-medium">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Back to Catalog
            </button>
            <div id="product-details-container" class="bg-white rounded-xl shadow-2xl p-6 md:p-10">
                </div>
        </div>

    </main>

    <script>
        // --- MOCK CATALOG DATA (Price included in variants for dynamic updates) ---
        const products = [
            {
                id: "nolita_19",
                name: "Coach - Nolita 19",
                price: "Rp 2.500.000", // Default price (used if no variants selected/listed)
                imageUrl: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a0?$desktopProduct$",
                variants: [
                    {
                        id: "nolita_19_1",
                        color: "signature canvas/Gold/Sand/Chalk",
                        price: "Rp 2.500.000", // Variant-specific price
                        imageUrl: "https://coach.scene7.com/is/image/Coach/cw426_imxdm_a0?$desktopProduct$",
                    },
                    {
                        id: "nolita_19_2",
                        color: "smooth leather/Gold",
                        price: "Rp 2.650.000", // Variant-specific price
                        imageUrl: "https://coach.scene7.com/is/image/Coach/cci92_immrn_a0?$desktopProduct$",
                    },
                    {
                        id: "nolita_19_3",
                        color: "novelty leather/Silver",
                        price: "Rp 2.700.000", // Variant-specific price
                        imageUrl: "https://coach.scene7.com/is/image/Coach/ccf58_sva47_a0?$desktopProduct$",
                    },
                ]
            },
            {
                id: "echo-headphones",
                name: "Echo Noise-Cancelling Headphones",
                price: "$249.00",
                imageUrl: "https://placehold.co/800x600/4f46e5/ffffff?text=Echo+Headphones+Details",
            },
            {
                id: "zenith-smartwatch",
                name: "Zenith Smartwatch (Series 3)",
                price: "$199.50",
                imageUrl: "https://placehold.co/800x600/10b981/ffffff?text=Zenith+Watch+Details",
            },
            {
                id: "luna-lamp",
                name: "Luna Desk Lamp",
                price: "$65.00",
                imageUrl: "https://placehold.co/800x600/fbbf24/101010?text=Luna+Lamp+Details",
            }
        ];
        // ------------------------------------

        const catalogGridView = document.getElementById('catalog-grid-view');
        const detailsView = document.getElementById('details-view');
        const catalogGrid = document.getElementById('catalog-grid');
        const productDetailsContainer = document.getElementById('product-details-container');

        // Global variables to track state for variant switching
        let currentProductVariants = [];
        let currentProductName = '';

        /**
         * Finds a product object by its unique ID.
         * @param {string} id - The ID of the product.
         * @returns {object | undefined} The product object or undefined if not found.
         */
        function getProductById(id) {
            return products.find(p => p.id === id);
        }

        /**
         * Switches the view to show the main catalog grid.
         */
        function showCatalogGrid() {
            catalogGridView.classList.remove('hidden-view');
            detailsView.classList.add('hidden-view');
            // Update URL hash for clean navigation
            window.location.hash = '';
        }
        
        /**
         * Updates the WhatsApp order link based on the selected product and variant.
         * @param {string} name - The product name.
         * @param {string} color - The selected variant color/description.
         */
        function updateOrderLink(name, color) {
            const orderLink = document.getElementById('order-link');
            // If the product has variants, use the selected color in the message
            const selectedItemName = color !== 'N/A' ? `${name} (${color})` : name;
            
            const whatsappMessage = `Halo, saya tertarik untuk Jastip produk ${selectedItemName}. Berapa total biayanya sampai Indonesia?`;
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(whatsappMessage)}`;
            orderLink.href = whatsappUrl;
        }

        /**
         * Switches the main product image and updates the active variant styling,
         * color name, price, and the order link.
         * This function is called by the thumbnail buttons.
         * @param {string} variantId - The ID of the selected variant.
         */
        window.selectVariant = function(variantId) {
            const selectedVariant = currentProductVariants.find(v => v.id === variantId);
            if (!selectedVariant) return;

            // 1. Update the Main Image Source and Alt Text
            document.getElementById('main-product-image').src = selectedVariant.imageUrl;
            document.getElementById('main-product-image').alt = `Detailed image of ${currentProductName} in ${selectedVariant.color}`;

            // 2. Update the active thumbnail styling
            document.querySelectorAll('.variant-thumbnail').forEach(el => {
                el.classList.remove('active');
            });
            document.getElementById(`variant-btn-${variantId}`).classList.add('active');

            // 3. Update the color name display
            document.getElementById('selected-color-name').textContent = selectedVariant.color;

            // 4. Update the price display
            document.getElementById('product-price').textContent = selectedVariant.price;

            // 5. Update the Order Link with the currently selected variant
            updateOrderLink(currentProductName, selectedVariant.color);
        }

        /**
         * Switches the view to show a single product's details.
         * @param {string} productId - The ID of the product to show.
         */
        window.showProductDetails = function(productId) {
            const product = getProductById(productId);

            if (!product) {
                console.error('Product not found for ID:', productId);
                showCatalogGrid();
                return;
            }

            currentProductName = product.name;

            // Check if the product has variants
            const isVariantProduct = product.variants && product.variants.length > 0;
            
            // If there are variants, use the first variant's details for initial display.
            const initialVariant = isVariantProduct ? product.variants[0] : null;

            // Set global state for variant switching
            currentProductVariants = product.variants || [];

            // Determine initial values
            const mainImageUrl = isVariantProduct ? initialVariant.imageUrl : product.imageUrl;
            const initialColorName = isVariantProduct ? initialVariant.color : 'N/A';
            // Use the variant price for the detail view if variants exist
            const initialPrice = isVariantProduct ? initialVariant.price : product.price;

            // Generate thumbnail HTML if variants exist
            const thumbnailHtml = isVariantProduct ? product.variants.map((variant, index) => {
                const initialActiveClasses = index === 0 ? 'active' : '';
                return `
                    <button
                        id="variant-btn-${variant.id}"
                        onclick="selectVariant('${variant.id}')"
                        class="variant-thumbnail w-16 h-16 rounded-lg border-2 border-transparent overflow-hidden ${initialActiveClasses} hover:ring-2 hover:ring-indigo-300 transition duration-150 transform hover:scale-105"
                        aria-label="Select ${variant.color} variant"
                        title="${variant.color}"
                    >
                        <img
                            src="${variant.imageUrl}"
                            alt="${variant.color} thumbnail"
                            class="w-full h-full object-cover"
                            onerror="this.onerror=null; this.src='https://placehold.co/100x100/e0e0e0/333333?text=N/A';"
                        />
                    </button>
                `;
            }).join('') : '';

            // Construct the variant selector block
            const variantSelector = isVariantProduct ? `
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-2">Color: <span id="selected-color-name" class="font-normal text-indigo-600">${initialColorName}</span></h4>
                    <div class="flex space-x-3">
                        ${thumbnailHtml}
                    </div>
                </div>
            ` : '';

            // 1. Build the HTML for the detail view
            const detailHtml = `
                <div class="md:flex md:space-x-10">
                    <div class="md:w-1/2 mb-6 md:mb-0">
                        <img
                            id="main-product-image"
                            src="${mainImageUrl}"
                            alt="Detailed image of ${product.name} in ${initialColorName}"
                            class="w-full rounded-lg shadow-lg"
                            onerror="this.onerror=null; this.src='https://placehold.co/800x600/e0e0e0/333333?text=Details+Image+Missing';"
                        >
                    </div>
                    <div class="md:w-1/2">
                        <h2 class="text-4xl font-bold text-gray-900 mb-4">${product.name}</h2>
                        ${variantSelector} <p id="product-price" class="text-3xl font-extrabold text-indigo-700 mb-6">${initialPrice}</p>
                        
                        <div class="mt-8 pt-4 border-t border-gray-200">
                            <h3 class="text-xl font-bold text-gray-900 mb-4">Interested in Jastip?</h3>
                            <p class="text-gray-600 mb-4">Click below to start your order via WhatsApp or another contact method.</p>
                            
                            <a href="#" id="order-link" class="inline-flex items-center justify-center w-full md:w-auto px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-green-500 hover:bg-green-600 transition duration-150 shadow-xl transform hover:scale-[1.01]">
                                Place an Order Now
                            </a>
                        </div>

                    </div>
                </div>
            `;

            // 2. Inject and switch the view
            productDetailsContainer.innerHTML = detailHtml;
            catalogGridView.classList.add('hidden-view');
            detailsView.classList.remove('hidden-view');

            // 3. Update URL hash for sharing/bookmarking
            window.location.hash = productId;
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // 4. Set the initial order link
            updateOrderLink(product.name, initialColorName);
        }


        /**
         * Creates an HTML element for a single product card.
         * @param {object} product - The product data object.
         * @returns {string} The HTML string for the product card.
         */
        function createProductCard(product) {
            // Determine the image for the main catalog card. Uses the first variant if available.
            const cardImageUrl = (product.variants && product.variants.length > 0)
                ? product.variants[0].imageUrl
                : product.imageUrl;
            
            // Determine the price for the main catalog card
            const cardPrice = (product.variants && product.variants.length > 0)
                ? product.variants[0].price // Show the price of the first variant if available
                : product.price;

            // Note the use of onclick="showProductDetails('${product.id}')"
            return `
                <div class="bg-white rounded-xl shadow-lg hover:shadow-2xl transition duration-300 overflow-hidden transform hover:-translate-y-1">
                    <img
                        src="${cardImageUrl}"
                        alt="Image of ${product.name}"
                        class="w-full h-48 object-cover object-center"
                        onerror="this.onerror=null; this.src='https://placehold.co/600x400/e0e0e0/333333?text=Image+Not+Found';"
                    >
                    <div class="p-6">
                        <h2 class="text-2xl font-semibold text-gray-900 mb-2">${product.name}</h2>
                        <p class="text-indigo-600 text-xl font-bold mb-4">${cardPrice}</p>
                    </div>
                    <div class="p-6 pt-0">
                        <button onclick="showProductDetails('${product.id}')" class="w-full py-3 bg-indigo-500 text-white font-medium rounded-lg hover:bg-indigo-600 transition duration-150 shadow-md">
                            View Details
                        </button>
                    </div>
                </div>
            `;
        }

        /**
         * Renders all product cards to the catalog grid.
         */
        function renderCatalog() {
            if (!catalogGrid) return;
            const catalogHtml = products.map(createProductCard).join('');
            catalogGrid.innerHTML = catalogHtml;
        }

        /**
         * Checks the URL hash on load to see if a specific product should be displayed immediately.
         */
        function checkInitialHash() {
            const productId = window.location.hash.substring(1);
            if (productId) {
                showProductDetails(productId);
            } else {
                showCatalogGrid();
            }
        }

        // Initialize the catalog display and check the hash on page load
        document.addEventListener('DOMContentLoaded', () => {
            renderCatalog();
            checkInitialHash();
        });

        // Listen for hash changes (e.g., browser back button)
        window.addEventListener('hashchange', () => {
            checkInitialHash();
        });
    </script>

</body>
</html>
